import{m as j,u as Mn,k as Rn,p as Q,s as K,l as U,j as W,n as mn,o as jn,q as I,r as C,t as qn,v as Hn,w as hn,x as En}from"./micromark-extension-14097367.js";import{k as xn,l as Nn}from"./unified-a6a0231f.js";import{d as Vn}from"./refractor-a44cffb7.js";function kn(n){if(n===null||j(n)||Mn(n))return 1;if(Rn(n))return 2}function gn(n,r,e){const t=[];let i=-1;for(;++i<n.length;){const u=n[i].resolveAll;u&&!t.includes(u)&&(r=u(r,e),t.push(u))}return r}const pn={name:"attention",tokenize:Wn,resolveAll:Qn};function Qn(n,r){let e=-1,t,i,u,l,s,c,m,x;for(;++e<n.length;)if(n[e][0]==="enter"&&n[e][1].type==="attentionSequence"&&n[e][1]._close){for(t=e;t--;)if(n[t][0]==="exit"&&n[t][1].type==="attentionSequence"&&n[t][1]._open&&r.sliceSerialize(n[t][1]).charCodeAt(0)===r.sliceSerialize(n[e][1]).charCodeAt(0)){if((n[t][1]._close||n[e][1]._open)&&(n[e][1].end.offset-n[e][1].start.offset)%3&&!((n[t][1].end.offset-n[t][1].start.offset+n[e][1].end.offset-n[e][1].start.offset)%3))continue;c=n[t][1].end.offset-n[t][1].start.offset>1&&n[e][1].end.offset-n[e][1].start.offset>1?2:1;const p=Object.assign({},n[t][1].end),k=Object.assign({},n[e][1].start);bn(p,-c),bn(k,c),l={type:c>1?"strongSequence":"emphasisSequence",start:p,end:Object.assign({},n[t][1].end)},s={type:c>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[e][1].start),end:k},u={type:c>1?"strongText":"emphasisText",start:Object.assign({},n[t][1].end),end:Object.assign({},n[e][1].start)},i={type:c>1?"strong":"emphasis",start:Object.assign({},l.start),end:Object.assign({},s.end)},n[t][1].end=Object.assign({},l.start),n[e][1].start=Object.assign({},s.end),m=[],n[t][1].end.offset-n[t][1].start.offset&&(m=Q(m,[["enter",n[t][1],r],["exit",n[t][1],r]])),m=Q(m,[["enter",i,r],["enter",l,r],["exit",l,r],["enter",u,r]]),m=Q(m,gn(r.parser.constructs.insideSpan.null,n.slice(t+1,e),r)),m=Q(m,[["exit",u,r],["enter",s,r],["exit",s,r],["exit",i,r]]),n[e][1].end.offset-n[e][1].start.offset?(x=2,m=Q(m,[["enter",n[e][1],r],["exit",n[e][1],r]])):x=0,K(n,t-1,e-t+3,m),e=t+m.length-x-2;break}}for(e=-1;++e<n.length;)n[e][1].type==="attentionSequence"&&(n[e][1].type="data");return n}function Wn(n,r){const e=this.parser.constructs.attentionMarkers.null,t=this.previous,i=kn(t);let u;return l;function l(c){return u=c,n.enter("attentionSequence"),s(c)}function s(c){if(c===u)return n.consume(c),s;const m=n.exit("attentionSequence"),x=kn(c),p=!x||x===2&&i||e.includes(c),k=!i||i===2&&x||e.includes(t);return m._open=!!(u===42?p:p&&(i||!k)),m._close=!!(u===42?k:k&&(x||!p)),r(c)}}function bn(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const Un={name:"autolink",tokenize:$n};function $n(n,r,e){let t=0;return i;function i(h){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),u}function u(h){return U(h)?(n.consume(h),l):m(h)}function l(h){return h===43||h===45||h===46||W(h)?(t=1,s(h)):m(h)}function s(h){return h===58?(n.consume(h),t=0,c):(h===43||h===45||h===46||W(h))&&t++<32?(n.consume(h),s):(t=0,m(h))}function c(h){return h===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),r):h===null||h===32||h===60||mn(h)?e(h):(n.consume(h),c)}function m(h){return h===64?(n.consume(h),x):jn(h)?(n.consume(h),m):e(h)}function x(h){return W(h)?p(h):e(h)}function p(h){return h===46?(n.consume(h),t=0,x):h===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),r):k(h)}function k(h){if((h===45||W(h))&&t++<63){const y=h===45?k:p;return n.consume(h),y}return e(h)}}function F(n,r,e,t){const i=t?t-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(c){return I(c)?(n.enter(e),s(c)):r(c)}function s(c){return I(c)&&u++<i?(n.consume(c),s):(n.exit(e),r(c))}}const ln={tokenize:Yn,partial:!0};function Yn(n,r,e){return t;function t(u){return I(u)?F(n,i,"linePrefix")(u):i(u)}function i(u){return u===null||C(u)?r(u):e(u)}}const An={name:"blockQuote",tokenize:vn,continuation:{tokenize:Gn},exit:Jn};function vn(n,r,e){const t=this;return i;function i(l){if(l===62){const s=t.containerState;return s.open||(n.enter("blockQuote",{_container:!0}),s.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),u}return e(l)}function u(l){return I(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(l))}}function Gn(n,r,e){const t=this;return i;function i(l){return I(l)?F(n,u,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return n.attempt(An,r,e)(l)}}function Jn(n){n.exit("blockQuote")}const Fn={name:"characterEscape",tokenize:Xn};function Xn(n,r,e){return t;function t(u){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(u),n.exit("escapeMarker"),i}function i(u){return qn(u)?(n.enter("characterEscapeValue"),n.consume(u),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):e(u)}}const On={name:"characterReference",tokenize:Zn};function Zn(n,r,e){const t=this;let i=0,u,l;return s;function s(p){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),c}function c(p){return p===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(p),n.exit("characterReferenceMarkerNumeric"),m):(n.enter("characterReferenceValue"),u=31,l=W,x(p))}function m(p){return p===88||p===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(p),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),u=6,l=Hn,x):(n.enter("characterReferenceValue"),u=7,l=hn,x(p))}function x(p){if(p===59&&i){const k=n.exit("characterReferenceValue");return l===W&&!Vn(t.sliceSerialize(k))?e(p):(n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)}return l(p)&&i++<u?(n.consume(p),x):e(p)}}const fn={tokenize:dn,partial:!0},Sn={name:"codeFenced",tokenize:Kn,concrete:!0};function Kn(n,r,e){const t=this,i={tokenize:O,partial:!0};let u=0,l=0,s;return c;function c(b){return m(b)}function m(b){const E=t.events[t.events.length-1];return u=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,s=b,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),x(b)}function x(b){return b===s?(l++,n.consume(b),x):l<3?e(b):(n.exit("codeFencedFenceSequence"),I(b)?F(n,p,"whitespace")(b):p(b))}function p(b){return b===null||C(b)?(n.exit("codeFencedFence"),t.interrupt?r(b):n.check(fn,B,T)(b)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),k(b))}function k(b){return b===null||C(b)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),p(b)):I(b)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),F(n,h,"whitespace")(b)):b===96&&b===s?e(b):(n.consume(b),k)}function h(b){return b===null||C(b)?p(b):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),y(b))}function y(b){return b===null||C(b)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),p(b)):b===96&&b===s?e(b):(n.consume(b),y)}function B(b){return n.attempt(i,T,M)(b)}function M(b){return n.enter("lineEnding"),n.consume(b),n.exit("lineEnding"),f}function f(b){return u>0&&I(b)?F(n,_,"linePrefix",u+1)(b):_(b)}function _(b){return b===null||C(b)?n.check(fn,B,T)(b):(n.enter("codeFlowValue"),S(b))}function S(b){return b===null||C(b)?(n.exit("codeFlowValue"),_(b)):(n.consume(b),S)}function T(b){return n.exit("codeFenced"),r(b)}function O(b,E,P){let R=0;return g;function g(A){return b.enter("lineEnding"),b.consume(A),b.exit("lineEnding"),w}function w(A){return b.enter("codeFencedFence"),I(A)?F(b,z,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):z(A)}function z(A){return A===s?(b.enter("codeFencedFenceSequence"),D(A)):P(A)}function D(A){return A===s?(R++,b.consume(A),D):R>=l?(b.exit("codeFencedFenceSequence"),I(A)?F(b,L,"whitespace")(A):L(A)):P(A)}function L(A){return A===null||C(A)?(b.exit("codeFencedFence"),E(A)):P(A)}}}function dn(n,r,e){const t=this;return i;function i(l){return l===null?e(l):(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),u)}function u(l){return t.parser.lazy[t.now().line]?e(l):r(l)}}const on={name:"codeIndented",tokenize:tt},nt={tokenize:et,partial:!0};function tt(n,r,e){const t=this;return i;function i(m){return n.enter("codeIndented"),F(n,u,"linePrefix",4+1)(m)}function u(m){const x=t.events[t.events.length-1];return x&&x[1].type==="linePrefix"&&x[2].sliceSerialize(x[1],!0).length>=4?l(m):e(m)}function l(m){return m===null?c(m):C(m)?n.attempt(nt,l,c)(m):(n.enter("codeFlowValue"),s(m))}function s(m){return m===null||C(m)?(n.exit("codeFlowValue"),l(m)):(n.consume(m),s)}function c(m){return n.exit("codeIndented"),r(m)}}function et(n,r,e){const t=this;return i;function i(l){return t.parser.lazy[t.now().line]?e(l):C(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),i):F(n,u,"linePrefix",4+1)(l)}function u(l){const s=t.events[t.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?r(l):C(l)?i(l):e(l)}}const rt={name:"codeText",tokenize:lt,resolve:it,previous:ut};function it(n){let r=n.length-4,e=3,t,i;if((n[e][1].type==="lineEnding"||n[e][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(t=e;++t<r;)if(n[t][1].type==="codeTextData"){n[e][1].type="codeTextPadding",n[r][1].type="codeTextPadding",e+=2,r-=2;break}}for(t=e-1,r++;++t<=r;)i===void 0?t!==r&&n[t][1].type!=="lineEnding"&&(i=t):(t===r||n[t][1].type==="lineEnding")&&(n[i][1].type="codeTextData",t!==i+2&&(n[i][1].end=n[t-1][1].end,n.splice(i+2,t-i-2),r-=t-i-2,t=i+2),i=void 0);return n}function ut(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function lt(n,r,e){let t=0,i,u;return l;function l(p){return n.enter("codeText"),n.enter("codeTextSequence"),s(p)}function s(p){return p===96?(n.consume(p),t++,s):(n.exit("codeTextSequence"),c(p))}function c(p){return p===null?e(p):p===32?(n.enter("space"),n.consume(p),n.exit("space"),c):p===96?(u=n.enter("codeTextSequence"),i=0,x(p)):C(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),c):(n.enter("codeTextData"),m(p))}function m(p){return p===null||p===32||p===96||C(p)?(n.exit("codeTextData"),c(p)):(n.consume(p),m)}function x(p){return p===96?(n.consume(p),i++,x):i===t?(n.exit("codeTextSequence"),n.exit("codeText"),r(p)):(u.type="codeTextData",m(p))}}const at={tokenize:mt,resolve:st},ot={tokenize:ht,partial:!0};function st(n){return En(n),n}function mt(n,r){let e;return t;function t(s){return n.enter("content"),e=n.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?u(s):C(s)?n.check(ot,l,u)(s):(n.consume(s),i)}function u(s){return n.exit("chunkContent"),n.exit("content"),r(s)}function l(s){return n.consume(s),n.exit("chunkContent"),e.next=n.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,i}}function ht(n,r,e){const t=this;return i;function i(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),F(n,u,"linePrefix")}function u(l){if(l===null||C(l))return e(l);const s=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?r(l):n.interrupt(t.parser.constructs.flow,e,r)(l)}}function Bn(n,r,e,t,i,u,l,s,c){const m=c||Number.POSITIVE_INFINITY;let x=0;return p;function p(f){return f===60?(n.enter(t),n.enter(i),n.enter(u),n.consume(f),n.exit(u),k):f===null||f===32||f===41||mn(f)?e(f):(n.enter(t),n.enter(l),n.enter(s),n.enter("chunkString",{contentType:"string"}),B(f))}function k(f){return f===62?(n.enter(u),n.consume(f),n.exit(u),n.exit(i),n.exit(t),r):(n.enter(s),n.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===62?(n.exit("chunkString"),n.exit(s),k(f)):f===null||f===60||C(f)?e(f):(n.consume(f),f===92?y:h)}function y(f){return f===60||f===62||f===92?(n.consume(f),h):h(f)}function B(f){return!x&&(f===null||f===41||j(f))?(n.exit("chunkString"),n.exit(s),n.exit(l),n.exit(t),r(f)):x<m&&f===40?(n.consume(f),x++,B):f===41?(n.consume(f),x--,B):f===null||f===32||f===40||mn(f)?e(f):(n.consume(f),f===92?M:B)}function M(f){return f===40||f===41||f===92?(n.consume(f),B):B(f)}}function Tn(n,r,e,t,i,u){const l=this;let s=0,c;return m;function m(h){return n.enter(t),n.enter(i),n.consume(h),n.exit(i),n.enter(u),x}function x(h){return s>999||h===null||h===91||h===93&&!c||h===94&&!s&&"_hiddenFootnoteSupport"in l.parser.constructs?e(h):h===93?(n.exit(u),n.enter(i),n.consume(h),n.exit(i),n.exit(t),r):C(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),x):(n.enter("chunkString",{contentType:"string"}),p(h))}function p(h){return h===null||h===91||h===93||C(h)||s++>999?(n.exit("chunkString"),x(h)):(n.consume(h),c||(c=!I(h)),h===92?k:p)}function k(h){return h===91||h===92||h===93?(n.consume(h),s++,p):p(h)}}function Dn(n,r,e,t,i,u){let l;return s;function s(k){return k===34||k===39||k===40?(n.enter(t),n.enter(i),n.consume(k),n.exit(i),l=k===40?41:k,c):e(k)}function c(k){return k===l?(n.enter(i),n.consume(k),n.exit(i),n.exit(t),r):(n.enter(u),m(k))}function m(k){return k===l?(n.exit(u),c(l)):k===null?e(k):C(k)?(n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),F(n,m,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),x(k))}function x(k){return k===l||k===null||C(k)?(n.exit("chunkString"),m(k)):(n.consume(k),k===92?p:x)}function p(k){return k===l||k===92?(n.consume(k),x):x(k)}}function d(n,r){let e;return t;function t(i){return C(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),e=!0,t):I(i)?F(n,t,e?"linePrefix":"lineSuffix")(i):r(i)}}const pt={name:"definition",tokenize:gt},xt={tokenize:ct,partial:!0};function gt(n,r,e){const t=this;let i;return u;function u(h){return n.enter("definition"),l(h)}function l(h){return Tn.call(t,n,s,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function s(h){return i=xn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),h===58?(n.enter("definitionMarker"),n.consume(h),n.exit("definitionMarker"),c):e(h)}function c(h){return j(h)?d(n,m)(h):m(h)}function m(h){return Bn(n,x,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function x(h){return n.attempt(xt,p,p)(h)}function p(h){return I(h)?F(n,k,"whitespace")(h):k(h)}function k(h){return h===null||C(h)?(n.exit("definition"),t.parser.defined.push(i),r(h)):e(h)}}function ct(n,r,e){return t;function t(s){return j(s)?d(n,i)(s):e(s)}function i(s){return Dn(n,u,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function u(s){return I(s)?F(n,l,"whitespace")(s):l(s)}function l(s){return s===null||C(s)?r(s):e(s)}}const kt={name:"hardBreakEscape",tokenize:bt};function bt(n,r,e){return t;function t(u){return n.enter("hardBreakEscape"),n.consume(u),i}function i(u){return C(u)?(n.exit("hardBreakEscape"),r(u)):e(u)}}const ft={name:"headingAtx",tokenize:wt,resolve:St};function St(n,r){let e=n.length-2,t=3,i,u;return n[t][1].type==="whitespace"&&(t+=2),e-2>t&&n[e][1].type==="whitespace"&&(e-=2),n[e][1].type==="atxHeadingSequence"&&(t===e-1||e-4>t&&n[e-2][1].type==="whitespace")&&(e-=t+1===e?2:4),e>t&&(i={type:"atxHeadingText",start:n[t][1].start,end:n[e][1].end},u={type:"chunkText",start:n[t][1].start,end:n[e][1].end,contentType:"text"},K(n,t,e-t+1,[["enter",i,r],["enter",u,r],["exit",u,r],["exit",i,r]])),n}function wt(n,r,e){let t=0;return i;function i(x){return n.enter("atxHeading"),u(x)}function u(x){return n.enter("atxHeadingSequence"),l(x)}function l(x){return x===35&&t++<6?(n.consume(x),l):x===null||j(x)?(n.exit("atxHeadingSequence"),s(x)):e(x)}function s(x){return x===35?(n.enter("atxHeadingSequence"),c(x)):x===null||C(x)?(n.exit("atxHeading"),r(x)):I(x)?F(n,s,"whitespace")(x):(n.enter("atxHeadingText"),m(x))}function c(x){return x===35?(n.consume(x),c):(n.exit("atxHeadingSequence"),s(x))}function m(x){return x===null||x===35||j(x)?(n.exit("atxHeadingText"),s(x)):(n.consume(x),m)}}const yt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wn=["pre","script","style","textarea"],zt={name:"htmlFlow",tokenize:At,resolveTo:Et,concrete:!0},Ct={tokenize:Ot,partial:!0},It={tokenize:Ft,partial:!0};function Et(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function At(n,r,e){const t=this;let i,u,l,s,c;return m;function m(o){return x(o)}function x(o){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(o),p}function p(o){return o===33?(n.consume(o),k):o===47?(n.consume(o),u=!0,B):o===63?(n.consume(o),i=3,t.interrupt?r:a):U(o)?(n.consume(o),l=String.fromCharCode(o),M):e(o)}function k(o){return o===45?(n.consume(o),i=2,h):o===91?(n.consume(o),i=5,s=0,y):U(o)?(n.consume(o),i=4,t.interrupt?r:a):e(o)}function h(o){return o===45?(n.consume(o),t.interrupt?r:a):e(o)}function y(o){const v="CDATA[";return o===v.charCodeAt(s++)?(n.consume(o),s===v.length?t.interrupt?r:z:y):e(o)}function B(o){return U(o)?(n.consume(o),l=String.fromCharCode(o),M):e(o)}function M(o){if(o===null||o===47||o===62||j(o)){const v=o===47,nn=l.toLowerCase();return!v&&!u&&wn.includes(nn)?(i=1,t.interrupt?r(o):z(o)):yt.includes(l.toLowerCase())?(i=6,v?(n.consume(o),f):t.interrupt?r(o):z(o)):(i=7,t.interrupt&&!t.parser.lazy[t.now().line]?e(o):u?_(o):S(o))}return o===45||W(o)?(n.consume(o),l+=String.fromCharCode(o),M):e(o)}function f(o){return o===62?(n.consume(o),t.interrupt?r:z):e(o)}function _(o){return I(o)?(n.consume(o),_):g(o)}function S(o){return o===47?(n.consume(o),g):o===58||o===95||U(o)?(n.consume(o),T):I(o)?(n.consume(o),S):g(o)}function T(o){return o===45||o===46||o===58||o===95||W(o)?(n.consume(o),T):O(o)}function O(o){return o===61?(n.consume(o),b):I(o)?(n.consume(o),O):S(o)}function b(o){return o===null||o===60||o===61||o===62||o===96?e(o):o===34||o===39?(n.consume(o),c=o,E):I(o)?(n.consume(o),b):P(o)}function E(o){return o===c?(n.consume(o),c=null,R):o===null||C(o)?e(o):(n.consume(o),E)}function P(o){return o===null||o===34||o===39||o===47||o===60||o===61||o===62||o===96||j(o)?O(o):(n.consume(o),P)}function R(o){return o===47||o===62||I(o)?S(o):e(o)}function g(o){return o===62?(n.consume(o),w):e(o)}function w(o){return o===null||C(o)?z(o):I(o)?(n.consume(o),w):e(o)}function z(o){return o===45&&i===2?(n.consume(o),N):o===60&&i===1?(n.consume(o),q):o===62&&i===4?(n.consume(o),Y):o===63&&i===3?(n.consume(o),a):o===93&&i===5?(n.consume(o),G):C(o)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(Ct,J,D)(o)):o===null||C(o)?(n.exit("htmlFlowData"),D(o)):(n.consume(o),z)}function D(o){return n.check(It,L,J)(o)}function L(o){return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),A}function A(o){return o===null||C(o)?D(o):(n.enter("htmlFlowData"),z(o))}function N(o){return o===45?(n.consume(o),a):z(o)}function q(o){return o===47?(n.consume(o),l="",$):z(o)}function $(o){if(o===62){const v=l.toLowerCase();return wn.includes(v)?(n.consume(o),Y):z(o)}return U(o)&&l.length<8?(n.consume(o),l+=String.fromCharCode(o),$):z(o)}function G(o){return o===93?(n.consume(o),a):z(o)}function a(o){return o===62?(n.consume(o),Y):o===45&&i===2?(n.consume(o),a):z(o)}function Y(o){return o===null||C(o)?(n.exit("htmlFlowData"),J(o)):(n.consume(o),Y)}function J(o){return n.exit("htmlFlow"),r(o)}}function Ft(n,r,e){const t=this;return i;function i(l){return C(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),u):e(l)}function u(l){return t.parser.lazy[t.now().line]?e(l):r(l)}}function Ot(n,r,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(ln,r,e)}}const Bt={name:"htmlText",tokenize:Tt};function Tt(n,r,e){const t=this;let i,u,l;return s;function s(a){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(a),c}function c(a){return a===33?(n.consume(a),m):a===47?(n.consume(a),O):a===63?(n.consume(a),S):U(a)?(n.consume(a),P):e(a)}function m(a){return a===45?(n.consume(a),x):a===91?(n.consume(a),u=0,y):U(a)?(n.consume(a),_):e(a)}function x(a){return a===45?(n.consume(a),h):e(a)}function p(a){return a===null?e(a):a===45?(n.consume(a),k):C(a)?(l=p,q(a)):(n.consume(a),p)}function k(a){return a===45?(n.consume(a),h):p(a)}function h(a){return a===62?N(a):a===45?k(a):p(a)}function y(a){const Y="CDATA[";return a===Y.charCodeAt(u++)?(n.consume(a),u===Y.length?B:y):e(a)}function B(a){return a===null?e(a):a===93?(n.consume(a),M):C(a)?(l=B,q(a)):(n.consume(a),B)}function M(a){return a===93?(n.consume(a),f):B(a)}function f(a){return a===62?N(a):a===93?(n.consume(a),f):B(a)}function _(a){return a===null||a===62?N(a):C(a)?(l=_,q(a)):(n.consume(a),_)}function S(a){return a===null?e(a):a===63?(n.consume(a),T):C(a)?(l=S,q(a)):(n.consume(a),S)}function T(a){return a===62?N(a):S(a)}function O(a){return U(a)?(n.consume(a),b):e(a)}function b(a){return a===45||W(a)?(n.consume(a),b):E(a)}function E(a){return C(a)?(l=E,q(a)):I(a)?(n.consume(a),E):N(a)}function P(a){return a===45||W(a)?(n.consume(a),P):a===47||a===62||j(a)?R(a):e(a)}function R(a){return a===47?(n.consume(a),N):a===58||a===95||U(a)?(n.consume(a),g):C(a)?(l=R,q(a)):I(a)?(n.consume(a),R):N(a)}function g(a){return a===45||a===46||a===58||a===95||W(a)?(n.consume(a),g):w(a)}function w(a){return a===61?(n.consume(a),z):C(a)?(l=w,q(a)):I(a)?(n.consume(a),w):R(a)}function z(a){return a===null||a===60||a===61||a===62||a===96?e(a):a===34||a===39?(n.consume(a),i=a,D):C(a)?(l=z,q(a)):I(a)?(n.consume(a),z):(n.consume(a),L)}function D(a){return a===i?(n.consume(a),i=void 0,A):a===null?e(a):C(a)?(l=D,q(a)):(n.consume(a),D)}function L(a){return a===null||a===34||a===39||a===60||a===61||a===96?e(a):a===47||a===62||j(a)?R(a):(n.consume(a),L)}function A(a){return a===47||a===62||j(a)?R(a):e(a)}function N(a){return a===62?(n.consume(a),n.exit("htmlTextData"),n.exit("htmlText"),r):e(a)}function q(a){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),$}function $(a){return I(a)?F(n,G,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):G(a)}function G(a){return n.enter("htmlTextData"),l(a)}}const cn={name:"labelEnd",tokenize:Rt,resolveTo:Mt,resolveAll:_t},Dt={tokenize:jt},Pt={tokenize:qt},Lt={tokenize:Ht};function _t(n){let r=-1;for(;++r<n.length;){const e=n[r][1];(e.type==="labelImage"||e.type==="labelLink"||e.type==="labelEnd")&&(n.splice(r+1,e.type==="labelImage"?4:2),e.type="data",r++)}return n}function Mt(n,r){let e=n.length,t=0,i,u,l,s;for(;e--;)if(i=n[e][1],u){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[e][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(n[e][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(u=e,i.type!=="labelLink")){t=2;break}}else i.type==="labelEnd"&&(l=e);const c={type:n[u][1].type==="labelLink"?"link":"image",start:Object.assign({},n[u][1].start),end:Object.assign({},n[n.length-1][1].end)},m={type:"label",start:Object.assign({},n[u][1].start),end:Object.assign({},n[l][1].end)},x={type:"labelText",start:Object.assign({},n[u+t+2][1].end),end:Object.assign({},n[l-2][1].start)};return s=[["enter",c,r],["enter",m,r]],s=Q(s,n.slice(u+1,u+t+3)),s=Q(s,[["enter",x,r]]),s=Q(s,gn(r.parser.constructs.insideSpan.null,n.slice(u+t+4,l-3),r)),s=Q(s,[["exit",x,r],n[l-2],n[l-1],["exit",m,r]]),s=Q(s,n.slice(l+1)),s=Q(s,[["exit",c,r]]),K(n,u,n.length,s),n}function Rt(n,r,e){const t=this;let i=t.events.length,u,l;for(;i--;)if((t.events[i][1].type==="labelImage"||t.events[i][1].type==="labelLink")&&!t.events[i][1]._balanced){u=t.events[i][1];break}return s;function s(k){return u?u._inactive?p(k):(l=t.parser.defined.includes(xn(t.sliceSerialize({start:u.end,end:t.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(k),n.exit("labelMarker"),n.exit("labelEnd"),c):e(k)}function c(k){return k===40?n.attempt(Dt,x,l?x:p)(k):k===91?n.attempt(Pt,x,l?m:p)(k):l?x(k):p(k)}function m(k){return n.attempt(Lt,x,p)(k)}function x(k){return r(k)}function p(k){return u._balanced=!0,e(k)}}function jt(n,r,e){return t;function t(p){return n.enter("resource"),n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),i}function i(p){return j(p)?d(n,u)(p):u(p)}function u(p){return p===41?x(p):Bn(n,l,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return j(p)?d(n,c)(p):x(p)}function s(p){return e(p)}function c(p){return p===34||p===39||p===40?Dn(n,m,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):x(p)}function m(p){return j(p)?d(n,x)(p):x(p)}function x(p){return p===41?(n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),n.exit("resource"),r):e(p)}}function qt(n,r,e){const t=this;return i;function i(s){return Tn.call(t,n,u,l,"reference","referenceMarker","referenceString")(s)}function u(s){return t.parser.defined.includes(xn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?r(s):e(s)}function l(s){return e(s)}}function Ht(n,r,e){return t;function t(u){return n.enter("reference"),n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),i}function i(u){return u===93?(n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),n.exit("reference"),r):e(u)}}const Nt={name:"labelStartImage",tokenize:Vt,resolveAll:cn.resolveAll};function Vt(n,r,e){const t=this;return i;function i(s){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(s),n.exit("labelImageMarker"),u}function u(s){return s===91?(n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelImage"),l):e(s)}function l(s){return s===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(s):r(s)}}const Qt={name:"labelStartLink",tokenize:Wt,resolveAll:cn.resolveAll};function Wt(n,r,e){const t=this;return i;function i(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(l):r(l)}}const sn={name:"lineEnding",tokenize:Ut};function Ut(n,r){return e;function e(t){return n.enter("lineEnding"),n.consume(t),n.exit("lineEnding"),F(n,r,"linePrefix")}}const un={name:"thematicBreak",tokenize:$t};function $t(n,r,e){let t=0,i;return u;function u(m){return n.enter("thematicBreak"),l(m)}function l(m){return i=m,s(m)}function s(m){return m===i?(n.enter("thematicBreakSequence"),c(m)):t>=3&&(m===null||C(m))?(n.exit("thematicBreak"),r(m)):e(m)}function c(m){return m===i?(n.consume(m),t++,c):(n.exit("thematicBreakSequence"),I(m)?F(n,s,"whitespace")(m):s(m))}}const V={name:"list",tokenize:Gt,continuation:{tokenize:Jt},exit:Zt},Yt={tokenize:Kt,partial:!0},vt={tokenize:Xt,partial:!0};function Gt(n,r,e){const t=this,i=t.events[t.events.length-1];let u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return s;function s(h){const y=t.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!t.containerState.marker||h===t.containerState.marker:hn(h)){if(t.containerState.type||(t.containerState.type=y,n.enter(y,{_container:!0})),y==="listUnordered")return n.enter("listItemPrefix"),h===42||h===45?n.check(un,e,m)(h):m(h);if(!t.interrupt||h===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(h)}return e(h)}function c(h){return hn(h)&&++l<10?(n.consume(h),c):(!t.interrupt||l<2)&&(t.containerState.marker?h===t.containerState.marker:h===41||h===46)?(n.exit("listItemValue"),m(h)):e(h)}function m(h){return n.enter("listItemMarker"),n.consume(h),n.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||h,n.check(ln,t.interrupt?e:x,n.attempt(Yt,k,p))}function x(h){return t.containerState.initialBlankLine=!0,u++,k(h)}function p(h){return I(h)?(n.enter("listItemPrefixWhitespace"),n.consume(h),n.exit("listItemPrefixWhitespace"),k):e(h)}function k(h){return t.containerState.size=u+t.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(h)}}function Jt(n,r,e){const t=this;return t.containerState._closeFlow=void 0,n.check(ln,i,u);function i(s){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,F(n,r,"listItemIndent",t.containerState.size+1)(s)}function u(s){return t.containerState.furtherBlankLines||!I(s)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,l(s)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,n.attempt(vt,r,l)(s))}function l(s){return t.containerState._closeFlow=!0,t.interrupt=void 0,F(n,n.attempt(V,r,e),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function Xt(n,r,e){const t=this;return F(n,i,"listItemIndent",t.containerState.size+1);function i(u){const l=t.events[t.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===t.containerState.size?r(u):e(u)}}function Zt(n){n.exit(this.containerState.type)}function Kt(n,r,e){const t=this;return F(n,i,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(u){const l=t.events[t.events.length-1];return!I(u)&&l&&l[1].type==="listItemPrefixWhitespace"?r(u):e(u)}}const yn={name:"setextUnderline",tokenize:ne,resolveTo:dt};function dt(n,r){let e=n.length,t,i,u;for(;e--;)if(n[e][0]==="enter"){if(n[e][1].type==="content"){t=e;break}n[e][1].type==="paragraph"&&(i=e)}else n[e][1].type==="content"&&n.splice(e,1),!u&&n[e][1].type==="definition"&&(u=e);const l={type:"setextHeading",start:Object.assign({},n[i][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[i][1].type="setextHeadingText",u?(n.splice(i,0,["enter",l,r]),n.splice(u+1,0,["exit",n[t][1],r]),n[t][1].end=Object.assign({},n[u][1].end)):n[t][1]=l,n.push(["exit",l,r]),n}function ne(n,r,e){const t=this;let i;return u;function u(m){let x=t.events.length,p;for(;x--;)if(t.events[x][1].type!=="lineEnding"&&t.events[x][1].type!=="linePrefix"&&t.events[x][1].type!=="content"){p=t.events[x][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||p)?(n.enter("setextHeadingLine"),i=m,l(m)):e(m)}function l(m){return n.enter("setextHeadingLineSequence"),s(m)}function s(m){return m===i?(n.consume(m),s):(n.exit("setextHeadingLineSequence"),I(m)?F(n,c,"lineSuffix")(m):c(m))}function c(m){return m===null||C(m)?(n.exit("setextHeadingLine"),r(m)):e(m)}}class te{constructor(){this.map=[]}add(r,e,t){ee(this,r,e,t)}consume(r){if(this.map.sort((u,l)=>u[0]-l[0]),this.map.length===0)return;let e=this.map.length;const t=[];for(;e>0;)e-=1,t.push(r.slice(this.map[e][0]+this.map[e][1])),t.push(this.map[e][2]),r.length=this.map[e][0];t.push([...r]),r.length=0;let i=t.pop();for(;i;)r.push(...i),i=t.pop();this.map.length=0}}function ee(n,r,e,t){let i=0;if(!(e===0&&t.length===0)){for(;i<n.map.length;){if(n.map[i][0]===r){n.map[i][1]+=e,n.map[i][2].push(...t);return}i+=1}n.map.push([r,e,t])}}function re(n,r){let e=!1;const t=[];for(;r<n.length;){const i=n[r];if(e){if(i[0]==="enter")i[1].type==="tableContent"&&t.push(n[r+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(n[r-1][1].type==="tableDelimiterMarker"){const u=t.length-1;t[u]=t[u]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(e=!0);r+=1}return t}const Le={flow:{null:{tokenize:ie,resolveAll:ue}}};function ie(n,r,e){const t=this;let i=0,u=0,l;return s;function s(g){let w=t.events.length-1;for(;w>-1;){const L=t.events[w][1].type;if(L==="lineEnding"||L==="linePrefix")w--;else break}const z=w>-1?t.events[w][1].type:null,D=z==="tableHead"||z==="tableRow"?b:c;return D===b&&t.parser.lazy[t.now().line]?e(g):D(g)}function c(g){return n.enter("tableHead"),n.enter("tableRow"),m(g)}function m(g){return g===124||(l=!0,u+=1),x(g)}function x(g){return g===null?e(g):C(g)?u>1?(u=0,t.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),h):e(g):I(g)?F(n,x,"whitespace")(g):(u+=1,l&&(l=!1,i+=1),g===124?(n.enter("tableCellDivider"),n.consume(g),n.exit("tableCellDivider"),l=!0,x):(n.enter("data"),p(g)))}function p(g){return g===null||g===124||j(g)?(n.exit("data"),x(g)):(n.consume(g),g===92?k:p)}function k(g){return g===92||g===124?(n.consume(g),p):p(g)}function h(g){return t.interrupt=!1,t.parser.lazy[t.now().line]?e(g):(n.enter("tableDelimiterRow"),l=!1,I(g)?F(n,y,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):y(g))}function y(g){return g===45||g===58?M(g):g===124?(l=!0,n.enter("tableCellDivider"),n.consume(g),n.exit("tableCellDivider"),B):O(g)}function B(g){return I(g)?F(n,M,"whitespace")(g):M(g)}function M(g){return g===58?(u+=1,l=!0,n.enter("tableDelimiterMarker"),n.consume(g),n.exit("tableDelimiterMarker"),f):g===45?(u+=1,f(g)):g===null||C(g)?T(g):O(g)}function f(g){return g===45?(n.enter("tableDelimiterFiller"),_(g)):O(g)}function _(g){return g===45?(n.consume(g),_):g===58?(l=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(g),n.exit("tableDelimiterMarker"),S):(n.exit("tableDelimiterFiller"),S(g))}function S(g){return I(g)?F(n,T,"whitespace")(g):T(g)}function T(g){return g===124?y(g):g===null||C(g)?!l||i!==u?O(g):(n.exit("tableDelimiterRow"),n.exit("tableHead"),r(g)):O(g)}function O(g){return e(g)}function b(g){return n.enter("tableRow"),E(g)}function E(g){return g===124?(n.enter("tableCellDivider"),n.consume(g),n.exit("tableCellDivider"),E):g===null||C(g)?(n.exit("tableRow"),r(g)):I(g)?F(n,E,"whitespace")(g):(n.enter("data"),P(g))}function P(g){return g===null||g===124||j(g)?(n.exit("data"),E(g)):(n.consume(g),g===92?R:P)}function R(g){return g===92||g===124?(n.consume(g),P):P(g)}}function ue(n,r){let e=-1,t=!0,i=0,u=[0,0,0,0],l=[0,0,0,0],s=!1,c=0,m,x,p;const k=new te;for(;++e<n.length;){const h=n[e],y=h[1];h[0]==="enter"?y.type==="tableHead"?(s=!1,c!==0&&(zn(k,r,c,m,x),x=void 0,c=0),m={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},k.add(e,0,[["enter",m,r]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(t=!0,p=void 0,u=[0,0,0,0],l=[0,e+1,0,0],s&&(s=!1,x={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},k.add(e,0,[["enter",x,r]])),i=y.type==="tableDelimiterRow"?2:x?3:1):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(t=!1,l[2]===0&&(u[1]!==0&&(l[0]=l[1],p=rn(k,r,u,i,void 0,p),u=[0,0,0,0]),l[2]=e)):y.type==="tableCellDivider"&&(t?t=!1:(u[1]!==0&&(l[0]=l[1],p=rn(k,r,u,i,void 0,p)),u=l,l=[u[1],e,0,0])):y.type==="tableHead"?(s=!0,c=e):y.type==="tableRow"||y.type==="tableDelimiterRow"?(c=e,u[1]!==0?(l[0]=l[1],p=rn(k,r,u,i,e,p)):l[1]!==0&&(p=rn(k,r,l,i,e,p)),i=0):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(l[3]=e)}for(c!==0&&zn(k,r,c,m,x),k.consume(r.events),e=-1;++e<r.events.length;){const h=r.events[e];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=re(r.events,e))}return n}function rn(n,r,e,t,i,u){const l=t===1?"tableHeader":t===2?"tableDelimiter":"tableData",s="tableContent";e[0]!==0&&(u.end=Object.assign({},Z(r.events,e[0])),n.add(e[0],0,[["exit",u,r]]));const c=Z(r.events,e[1]);if(u={type:l,start:Object.assign({},c),end:Object.assign({},c)},n.add(e[1],0,[["enter",u,r]]),e[2]!==0){const m=Z(r.events,e[2]),x=Z(r.events,e[3]),p={type:s,start:Object.assign({},m),end:Object.assign({},x)};if(n.add(e[2],0,[["enter",p,r]]),t!==2){const k=r.events[e[2]],h=r.events[e[3]];if(k[1].end=Object.assign({},h[1].end),k[1].type="chunkText",k[1].contentType="text",e[3]>e[2]+1){const y=e[2]+1,B=e[3]-e[2]-1;n.add(y,B,[])}}n.add(e[3]+1,0,[["exit",p,r]])}return i!==void 0&&(u.end=Object.assign({},Z(r.events,i)),n.add(i,0,[["exit",u,r]]),u=void 0),u}function zn(n,r,e,t,i){const u=[],l=Z(r.events,e);i&&(i.end=Object.assign({},l),u.push(["exit",i,r])),t.end=Object.assign({},l),u.push(["exit",t,r]),n.add(e+1,0,u)}function Z(n,r){const e=n[r],t=e[0]==="enter"?"start":"end";return e[1][t]}const le={tokenize:ae};function ae(n){const r=n.attempt(this.parser.constructs.contentInitial,t,i);let e;return r;function t(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),F(n,r,"linePrefix")}function i(s){return n.enter("paragraph"),u(s)}function u(s){const c=n.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=c),e=c,l(s)}function l(s){if(s===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(s);return}return C(s)?(n.consume(s),n.exit("chunkText"),u):(n.consume(s),l)}}const oe={tokenize:se},Cn={tokenize:me};function se(n){const r=this,e=[];let t=0,i,u,l;return s;function s(S){if(t<e.length){const T=e[t];return r.containerState=T[1],n.attempt(T[0].continuation,c,m)(S)}return m(S)}function c(S){if(t++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&_();const T=r.events.length;let O=T,b;for(;O--;)if(r.events[O][0]==="exit"&&r.events[O][1].type==="chunkFlow"){b=r.events[O][1].end;break}f(t);let E=T;for(;E<r.events.length;)r.events[E][1].end=Object.assign({},b),E++;return K(r.events,O+1,0,r.events.slice(T)),r.events.length=E,m(S)}return s(S)}function m(S){if(t===e.length){if(!i)return k(S);if(i.currentConstruct&&i.currentConstruct.concrete)return y(S);r.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(Cn,x,p)(S)}function x(S){return i&&_(),f(t),k(S)}function p(S){return r.parser.lazy[r.now().line]=t!==e.length,l=r.now().offset,y(S)}function k(S){return r.containerState={},n.attempt(Cn,h,y)(S)}function h(S){return t++,e.push([r.currentConstruct,r.containerState]),k(S)}function y(S){if(S===null){i&&_(),f(0),n.consume(S);return}return i=i||r.parser.flow(r.now()),n.enter("chunkFlow",{contentType:"flow",previous:u,_tokenizer:i}),B(S)}function B(S){if(S===null){M(n.exit("chunkFlow"),!0),f(0),n.consume(S);return}return C(S)?(n.consume(S),M(n.exit("chunkFlow")),t=0,r.interrupt=void 0,s):(n.consume(S),B)}function M(S,T){const O=r.sliceStream(S);if(T&&O.push(null),S.previous=u,u&&(u.next=S),u=S,i.defineSkip(S.start),i.write(O),r.parser.lazy[S.start.line]){let b=i.events.length;for(;b--;)if(i.events[b][1].start.offset<l&&(!i.events[b][1].end||i.events[b][1].end.offset>l))return;const E=r.events.length;let P=E,R,g;for(;P--;)if(r.events[P][0]==="exit"&&r.events[P][1].type==="chunkFlow"){if(R){g=r.events[P][1].end;break}R=!0}for(f(t),b=E;b<r.events.length;)r.events[b][1].end=Object.assign({},g),b++;K(r.events,P+1,0,r.events.slice(E)),r.events.length=b}}function f(S){let T=e.length;for(;T-- >S;){const O=e[T];r.containerState=O[1],O[0].exit.call(r,n)}e.length=S}function _(){i.write([null]),u=void 0,i=void 0,r.containerState._closeFlow=void 0}}function me(n,r,e){return F(n,n.attempt(this.parser.constructs.document,r,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const he={tokenize:pe};function pe(n){const r=this,e=n.attempt(ln,t,n.attempt(this.parser.constructs.flowInitial,i,F(n,n.attempt(this.parser.constructs.flow,i,n.attempt(at,i)),"linePrefix")));return e;function t(u){if(u===null){n.consume(u);return}return n.enter("lineEndingBlank"),n.consume(u),n.exit("lineEndingBlank"),r.currentConstruct=void 0,e}function i(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),r.currentConstruct=void 0,e}}const xe={resolveAll:Ln()},ge=Pn("string"),ce=Pn("text");function Pn(n){return{tokenize:r,resolveAll:Ln(n==="text"?ke:void 0)};function r(e){const t=this,i=this.parser.constructs[n],u=e.attempt(i,l,s);return l;function l(x){return m(x)?u(x):s(x)}function s(x){if(x===null){e.consume(x);return}return e.enter("data"),e.consume(x),c}function c(x){return m(x)?(e.exit("data"),u(x)):(e.consume(x),c)}function m(x){if(x===null)return!0;const p=i[x];let k=-1;if(p)for(;++k<p.length;){const h=p[k];if(!h.previous||h.previous.call(t,t.previous))return!0}return!1}}}function Ln(n){return r;function r(e,t){let i=-1,u;for(;++i<=e.length;)u===void 0?e[i]&&e[i][1].type==="data"&&(u=i,i++):(!e[i]||e[i][1].type!=="data")&&(i!==u+2&&(e[u][1].end=e[i-1][1].end,e.splice(u+2,i-u-2),i=u+2),u=void 0);return n?n(e,t):e}}function ke(n,r){let e=0;for(;++e<=n.length;)if((e===n.length||n[e][1].type==="lineEnding")&&n[e-1][1].type==="data"){const t=n[e-1][1],i=r.sliceStream(t);let u=i.length,l=-1,s=0,c;for(;u--;){const m=i[u];if(typeof m=="string"){for(l=m.length;m.charCodeAt(l-1)===32;)s++,l--;if(l)break;l=-1}else if(m===-2)c=!0,s++;else if(m!==-1){u++;break}}if(s){const m={type:e===n.length||c||s<2?"lineSuffix":"hardBreakTrailing",start:{line:t.end.line,column:t.end.column-s,offset:t.end.offset-s,_index:t.start._index+u,_bufferIndex:u?l:t.start._bufferIndex+l},end:Object.assign({},t.end)};t.end=Object.assign({},m.start),t.start.offset===t.end.offset?Object.assign(t,m):(n.splice(e,0,["enter",m,r],["exit",m,r]),e+=2)}e++}return n}function be(n,r,e){let t=Object.assign(e?Object.assign({},e):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},u=[];let l=[],s=[];const c={consume:_,enter:S,exit:T,attempt:E(O),check:E(b),interrupt:E(b,{interrupt:!0})},m={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:h,sliceSerialize:k,now:y,defineSkip:B,write:p};let x=r.tokenize.call(m,c);return r.resolveAll&&u.push(r),m;function p(w){return l=Q(l,w),M(),l[l.length-1]!==null?[]:(P(r,0),m.events=gn(u,m.events,m),m.events)}function k(w,z){return Se(h(w),z)}function h(w){return fe(l,w)}function y(){const{line:w,column:z,offset:D,_index:L,_bufferIndex:A}=t;return{line:w,column:z,offset:D,_index:L,_bufferIndex:A}}function B(w){i[w.line]=w.column,g()}function M(){let w;for(;t._index<l.length;){const z=l[t._index];if(typeof z=="string")for(w=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===w&&t._bufferIndex<z.length;)f(z.charCodeAt(t._bufferIndex));else f(z)}}function f(w){x=x(w)}function _(w){C(w)?(t.line++,t.column=1,t.offset+=w===-3?2:1,g()):w!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===l[t._index].length&&(t._bufferIndex=-1,t._index++)),m.previous=w}function S(w,z){const D=z||{};return D.type=w,D.start=y(),m.events.push(["enter",D,m]),s.push(D),D}function T(w){const z=s.pop();return z.end=y(),m.events.push(["exit",z,m]),z}function O(w,z){P(w,z.from)}function b(w,z){z.restore()}function E(w,z){return D;function D(L,A,N){let q,$,G,a;return Array.isArray(L)?J(L):"tokenize"in L?J([L]):Y(L);function Y(H){return an;function an(X){const tn=X!==null&&H[X],en=X!==null&&H.null,_n=[...Array.isArray(tn)?tn:tn?[tn]:[],...Array.isArray(en)?en:en?[en]:[]];return J(_n)(X)}}function J(H){return q=H,$=0,H.length===0?N:o(H[$])}function o(H){return an;function an(X){return a=R(),G=H,H.partial||(m.currentConstruct=H),H.name&&m.parser.constructs.disable.null.includes(H.name)?nn():H.tokenize.call(z?Object.assign(Object.create(m),z):m,c,v,nn)(X)}}function v(H){return w(G,a),A}function nn(H){return a.restore(),++$<q.length?o(q[$]):N}}}function P(w,z){w.resolveAll&&!u.includes(w)&&u.push(w),w.resolve&&K(m.events,z,m.events.length-z,w.resolve(m.events.slice(z),m)),w.resolveTo&&(m.events=w.resolveTo(m.events,m))}function R(){const w=y(),z=m.previous,D=m.currentConstruct,L=m.events.length,A=Array.from(s);return{restore:N,from:L};function N(){t=w,m.previous=z,m.currentConstruct=D,m.events.length=L,s=A,g()}}function g(){t.line in i&&t.column<2&&(t.column=i[t.line],t.offset+=i[t.line]-1)}}function fe(n,r){const e=r.start._index,t=r.start._bufferIndex,i=r.end._index,u=r.end._bufferIndex;let l;if(e===i)l=[n[e].slice(t,u)];else{if(l=n.slice(e,i),t>-1){const s=l[0];typeof s=="string"?l[0]=s.slice(t):l.shift()}u>0&&l.push(n[i].slice(0,u))}return l}function Se(n,r){let e=-1;const t=[];let i;for(;++e<n.length;){const u=n[e];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=r?" ":"	";break}case-1:{if(!r&&i)continue;l=" ";break}default:l=String.fromCharCode(u)}i=u===-2,t.push(l)}return t.join("")}const we={42:V,43:V,45:V,48:V,49:V,50:V,51:V,52:V,53:V,54:V,55:V,56:V,57:V,62:An},ye={91:pt},ze={[-2]:on,[-1]:on,32:on},Ce={35:ft,42:un,45:[yn,un],60:zt,61:yn,95:un,96:Sn,126:Sn},Ie={38:On,92:Fn},Ee={[-5]:sn,[-4]:sn,[-3]:sn,33:Nt,38:On,42:pn,60:[Un,Bt],91:Qt,92:[kt,Fn],93:cn,95:pn,96:rt},Ae={null:[pn,xe]},Fe={null:[42,95]},Oe={null:[]},Be=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Fe,contentInitial:ye,disable:Oe,document:we,flow:Ce,flowInitial:ze,insideSpan:Ae,string:Ie,text:Ee},Symbol.toStringTag,{value:"Module"}));function _e(n){const e=Nn([Be,...(n||{}).extensions||[]]),t={defined:[],lazy:{},constructs:e,content:i(le),document:i(oe),flow:i(he),string:i(ge),text:i(ce)};return t;function i(u){return l;function l(s){return be(t,u,s)}}}const In=/[\0\t\n\r]/g;function Me(){let n=1,r="",e=!0,t;return i;function i(u,l,s){const c=[];let m,x,p,k,h;for(u=r+u.toString(l),p=0,r="",e&&(u.charCodeAt(0)===65279&&p++,e=void 0);p<u.length;){if(In.lastIndex=p,m=In.exec(u),k=m&&m.index!==void 0?m.index:u.length,h=u.charCodeAt(k),!m){r=u.slice(p);break}if(h===10&&p===k&&t)c.push(-3),t=void 0;else switch(t&&(c.push(-5),t=void 0),p<k&&(c.push(u.slice(p,k)),n+=k-p),h){case 0:{c.push(65533),n++;break}case 9:{for(x=Math.ceil(n/4)*4,c.push(-2);n++<x;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:t=!0,n=1}p=k+1}return s&&(t&&c.push(-5),r&&c.push(r),c.push(null)),c}}function Re(n){for(;!En(n););return n}export{_e as a,ln as b,kn as c,Me as d,F as f,Le as g,Re as p,gn as r};
